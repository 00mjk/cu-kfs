<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
	   xmlns:p="http://www.springframework.org/schema/p"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
	<!-- Our CUWebAuthAuthenticationService is a RemoteUserAuthenticationService subclass that can
	     also look at the HTTP headers that CUWebAuth exposes -->
	     
	<bean id="kimAuthenticationService" class="edu.cornell.cynergy.service.impl.CUWebAuthAuthenticationService">
	    <property name="useHttpHeaders"><value>${cynergy.cuwal.useHttpHeaders}</value></property>
	</bean>
    
	<!-- override encryption services -->
	<bean id="encryptionService" class="edu.cornell.cynergy.service.impl.AESEncryptionServiceImpl" lazy-init="true">
	  <property name="key" value="${cynergy.encryption.key}"/>
	  <property name="enabled" value="${cynergy.encryption.busEncryption}"/>
	</bean>
	
	<!-- moved from cynergy-server-customizations/CynergyKSBSpringBeans.xml and  cynergy-server-customizations/CynergyKEWSpringBeans.xml -->
	<bean id="enEncryptionService" class="edu.cornell.cynergy.service.impl.AESEncryptionServiceImpl" lazy-init="true">
		<property name="key" value="${cynergy.encryption.key}"/>
	  <property name="enabled" value="${cynergy.encryption.busEncryption}"/>
	</bean>
	
    <!-- We override the KFS impl so that we can read properties specified at runtime -->
<!--
   	<bean id="properties" class="edu.cornell.kfs.sys.context.PropertyLoadingFactoryBean" />
  	<bean id="securityProperties" class="edu.cornell.kfs.sys.context.PropertyLoadingFactoryBean"
    	p:secureMode="true" />
    	  -->
    	  
    <!-- 
      Bringing the identity service overrides into KFS is not the preferred solution...
    <import resource="classpath*:edu/cornell/cynergy/core/CynergyServerOverrideSpringBeans.xml"/>
     -->
</beans>