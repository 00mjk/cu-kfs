<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                           http://www.springframework.org/schema/tx
                           http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
                           http://www.springframework.org/schema/aop
                           http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

	<bean id="cu-sys" parent="financialSystemModuleConfiguration-parentBean">
		<property name="packagePrefixes">
            <list merge="true">
                <value>edu.cornell.kfs.sys</value>
            </list>
        </property>
		<property name="dataDictionaryPackages">
			<list merge="true">
                <value>edu/cornell/kfs/sys/businessobject/datadictionary</value>                
			</list>
		</property>
		<property name="fiscalYearMakers">
			<list/>
		</property>
		<property name="scriptConfigurationFilePaths">
			<list/>
		</property>
		
		<property name="jobNames">
            <list merge="true">
				<value>documentRequeuerJob</value>
				<value>documentReindexerJob</value>
            </list>
        </property>
	</bean>
	
	<bean id="cu-financialSystemModuleService" parent="financialSystemModuleService-parentBean">
	 	<property name="moduleConfiguration" ref="cu-sys"/>
	</bean>

	<bean id="batchContainerStep" class="org.kuali.kfs.sys.batch.BatchContainerStep" parent="step">
 	    <property name="batchContainerDirectory" value="${staging.directory.sys.batchContainer}"/>
 	    <property name="batchContainerStopStep" ref="stopBatchContainerStep" />
 	</bean>
 	        
 	<bean id="stopBatchContainerStep" class="org.kuali.kfs.sys.batch.StopBatchContainerStep" parent="step"/>
 	        
 	<bean id="semaphoreInputFileTypeError" class="org.kuali.kfs.sys.batch.SemaphoreInputFileType">
 	    <property name="directoryPath" value="${staging.directory.sys.batchContainer}"/>
 	    <property name="fileExtension" value="error"/>
 	    <property name="fileTypeIdentifier" value="semaphoreInputFileTypeError" />
 	</bean>
 	        
 	<bean id="namespaceOrFilePathPermissionTypeService" class="org.kuali.kfs.sys.identity.NamespaceWildcardAllowedAndOrStringWildcardAllowedPermissionTypeServiceImpl">
 	    <property name="wildcardMatchStringAttributeName" value="filePath"/>
 	    <property name="namespaceRequiredOnStoredAttributeSet" value="false" />
 	</bean>
 	
 	<bean id="documentRequeuerJob" parent="unscheduledJobDescriptor">
		<property name="steps">
			<list>
				<ref bean="documentRequeuerStep" />
			</list>
		</property>
	</bean>
	
	<bean id="documentRequeuerStep" class="edu.cornell.kfs.sys.batch.DocumentRequeueStep" parent="step">
			<property name="stagingDirectory" value="${staging.directory}/sys"/>
	</bean>
	
	<bean id="documentReindexerJob" parent="unscheduledJobDescriptor">
		<property name="steps">
			<list>
				<ref bean="documentReindexerStep" />
			</list>
		</property>
	</bean>
	
	<bean id="documentReindexerStep" class="edu.cornell.kfs.sys.batch.DocumentReindexStep" parent="step">
			<property name="stagingDirectory" value="${staging.directory}/sys"/>
	</bean>
	
	<bean id="securityRequestOrganizationRoleTypeService" class="org.kuali.kfs.sys.identity.SecurityRequestOrganizationRoleTypeServiceImpl"/>
    <bean class="org.kuali.rice.ksb.messaging.KSBExporter">
     <property name="serviceDefinition">
       <bean parent="kfsService"
         p:service-ref="securityRequestOrganizationRoleTypeService"
         p:localServiceName="securityRequestOrganizationRoleTypeService" />
     </property>
    </bean>   

    <bean id="documentRequeuerFlatFileInputFileType" parent="documentRequeuerFlatFileInputFileType-parentBean"/>
	
    <bean id="documentRequeuerFlatFileInputFileType-parentBean" class="edu.cornell.kfs.sys.batch.DocumentRequeuerFlatFileInputType">
    	<property name="directoryPath">
	       <value>${staging.directory}/sys/</value>
	    </property>
	    <property name="fileExtension">
	       <value>txt</value>
	    </property>
	</bean>
    	
    <bean id="documentReindexFlatFileInputFileType" parent="documentReindexFlatFileInputFileType-parentBean"/>
	
    <bean id="documentReindexFlatFileInputFileType-parentBean" class="edu.cornell.kfs.sys.batch.DocumentReindexFlatFileInputType">
    	<property name="directoryPath">
	       <value>${staging.directory}/sys/</value>
	    </property>
	    <property name="fileExtension">
	       <value>txt</value>
	    </property>
	</bean>

    <bean id="documentRequeueFileBuilderService" parent="documentRequeueFileBuilderService-parentBean"/>
	
    <bean id="documentRequeueFileBuilderService-parentBean" class="edu.cornell.kfs.sys.service.impl.DocumentRequeueFileBuilderServiceImpl">
		<property name="documentRequeueFileBuilderDao" ref="documentRequeueFileBuilderDao"/>
    	<property name="directoryPath">
	       <value>${staging.directory}/sys/</value>
	    </property>
	    <property name="fileExtension">
	       <value>txt</value>
	    </property>
	    <property name="fileName">
	       <value>documentRequeue</value>
	    </property>
	</bean>
    	
	<bean id="documentRequeueFileBuilderDao" parent="platformAwareDao" class="edu.cornell.kfs.sys.dataaccess.impl.DocumentRequeueFileBuilderDaoOjb" depends-on="kewOjbConfigurer">
	    <property name="jcdAlias" value="enWorkflowDataSource" />
	</bean>

</beans>